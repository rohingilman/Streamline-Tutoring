
package group.project;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Scanner;

/**
 *
 * @author Evan Schwarzenbach
 */
public class GroupProject {
    static ArrayList<User> UserData = new ArrayList<>();// Stores all Users
    static ArrayList<Course> Courses = new ArrayList<>();// Stores all courses
    static boolean Loggedin;
    static int LoginIndex;// This number is used for the array list, whenever a user is officially logged in, the user will be: LoggedInUser= UserData.get(LoginIndex)
    
    public static void main(String[] args) throws Exception {
        boolean Trial= true;
        createUser("Evan", "Dog", "Admin");// No matter what we will need at least one user created for this project beforehand
        
//        createUser("James", "Dog", "Student");// This code is just test code, an example on how to use some of the methods
//        getUserData(UserData);
//        createCourse("Math", "1000");
//        createCourse("Math", "2000");
//        User Evan = UserData.get(0);
//        User James = UserData.get(1);
//        Course Math= Courses.get(0);
//        Evan.myCourses();
//        addCourse("Math", "1000", Evan);
//        addCourse("Math", "2000", Evan);
//        addCourse("Math", "1000", James);
//        Evan.myCourses();
//        Math.myMembers();

        while(Trial== true) {// If you want to test code edit out this whole while loop, this while loop is the entrie GUI
            System.out.println();
            System.out.println("Hello! Welcome to Streamline tutoring.");
            System.out.println("Enter 0 to Sign Up");
            System.out.println("Enter 1 to Login");
            System.out.println("Enter 2 to Exit");
            System.out.println();
            Scanner in = new Scanner(System.in);
            String input = in.next();
            
            if(input.equals("0")){//Sign up Code Complete
                System.out.println("Sign up");
                System.out.println("Please enter your name");
                Scanner inName = new Scanner(System.in);
                String Name = inName.next();
                System.out.println("Please enter your password");
                Scanner inPass = new Scanner(System.in);
                String Pass = inPass.next(); 
                signUp(Name,Pass);
            }
            
            
            
            else if(input.equals("1")){// Basic login, user entry
                System.out.println("Please enter your name");
                Scanner inName = new Scanner(System.in);
                String Name = inName.next();
                System.out.println("Please enter your password");
                Scanner inPass = new Scanner(System.in);
                String Pass = inPass.next(); 
                if ((Login(Name,Pass))==true){//This is the hard stuff, the rest of our GUI rests within this if statement
                    System.out.println("You have logged in, "+Name);
                    Loggedin= true;
                    User LoggedInUser= UserData.get(LoginIndex);// Declared User variable, is assigned during the user is logged in
//                    System.out.println(LoggedInUser.getRank());
                    
                    while(Loggedin==true){
                        
                        if(LoggedInUser.getRank()=="Student"){// Gui for student Rank
                            System.out.println();
                            System.out.println("Welcome "+LoggedInUser.getName()+" to the Streamline tutoring home page your rank is "+LoggedInUser.getRank());
                            System.out.println("Enter 0 to ");
                            System.out.println("Enter 1 to Login");
                            System.out.println("Enter 2 to Exit");
                            System.out.println();
                            Scanner in2 = new Scanner(System.in);
                            String input2 = in2.next();
                        }
                        
                        else if (LoggedInUser.getRank()=="Tutor") {// Gui for Tutor Rank
                            System.out.println();
                            System.out.println("Welcome "+LoggedInUser.getName()+" to the Streamline tutoring home page your rank is "+LoggedInUser.getRank());
                            System.out.println("Enter 0 to Sign Up");
                            System.out.println("Enter 1 to Login");
                            System.out.println("Enter 2 to Exit");
                            System.out.println("");
                            System.out.println();
                            Scanner in2 = new Scanner(System.in);
                            String input2 = in2.next();
                        }
                        
                        else if (LoggedInUser.getRank()=="Admin"){// GUI for Admin Rank
                            System.out.println();
                            System.out.println("Welcome "+LoggedInUser.getName()+" to the Streamline tutoring home page your rank is "+LoggedInUser.getRank());
                            System.out.println("Enter 0 to See all user Data");
                            System.out.println("Enter 1 to to see all courses");
                            System.out.println("Enter 2 to Change the rank of a user");
                            System.out.println("Enter 3 to create a course");
                            System.out.println();
                            Scanner in2 = new Scanner(System.in);
                            String input2 = in2.next();
                            
                        }
                        else {
                            Loggedin=false;
                        }
                    }
                    
                }
                
                else {
                    System.out.println("Login attempt failed, username or password is wrong");
                }
            }
            
            
            
            else if(input.equals("2")){// End program
                Trial= false;
            }
            else {// Exception handling
                System.out.println("Error, invalid number entered.");
            }            
    }
        
    System.out.println("Thank You for visiting our website!");
    }
    
    public static void createUser(String name, String pass, String rank)// custom create user function for the admin
    {
        if(rank.equals("Student")){
            UserData.add(new User(name, pass, "Student"));
        }
        else if(rank.equals("Tutor")){
            UserData.add(new User(name, pass, "Tutor"));
        }
        else if(rank.equals("Admin")){
            UserData.add(new User(name, pass, "Admin"));
        }
        else {
            System.out.println("User creation failed, rank is invalid");
        }
                                
    }
    
    public static void addCourse(String name,String courseNum, User user)// User Command to add a course to his courses
    {
        for (int i =0 ; i < Courses.size(); i++){
            if(name.equals(Courses.get(i).getName())&&(courseNum.equals(Courses.get(i).getNumber()))){
                user.addCourse(Courses.get(i));
                Courses.get(i).addMember(user);
                System.out.println("Course "+name+", "+courseNum+" has been added");
                break;
            }
            else if (i == (Courses.size()-1)){
                
                System.out.println("Course "+name+", "+courseNum+" does not exist");
                getCourseData(Courses);// Remove this line later, this is only for visual aid
                break;
            }        
        }
    }
        
    public static void createCourse(String name, String courseNum)// Admin Command to create a course
    {
        for (int i =0 ; i < Courses.size(); i++){
            if(name.equals(Courses.get(i).getName())&&(courseNum.equals(Courses.get(i).getNumber()))){
                System.out.println("Course Name and Course number is already created");
                break;
            }
            else if (i == (Courses.size()-1)){
                Courses.add(new Course(name, courseNum));
                System.out.println("Course "+name+", "+courseNum+" has been created");
                getCourseData(Courses);// Remove this line later, this is only for visual aid
                break;
            }
        }
        if(Courses.isEmpty()){
            Courses.add(new Course(name, courseNum));
            System.out.println("Course Name and Course number is already created");
            getCourseData(Courses);// Remove this line later, this is only for visual aid
        }
    }    
    
    public static void getUserData(ArrayList<User> ArrayList)// prints all of the users relevant data, 
    {
        for (int i =0; i < ArrayList.size(); i++){
            System.out.println(Arrays.toString(ArrayList.get(i).getInfo()));
        }
            
    }
    
    public static boolean Login(String name,String pass) // Test to see if username and password entered that of one of the users stored, true if they match
    {
        int i;
        
        for (i =0 ; i < UserData.size(); i++){
            if((name.equals(UserData.get(i).getName()))&&(pass.equals(UserData.get(i).getPass()))){
                LoginIndex=i;// This number is how we will find the logged in user
                return true;
                
            }
            else if (i == (UserData.size()-1)){
                System.out.println("Login failed");
                return false;
            }
        }
        return false;
    }
    
    public static void signUp(String name, String pass)//create user function but for the GUI
    {
        for (int i =0 ; i < UserData.size(); i++){
            if(name.equals(UserData.get(i).getName())){
                System.out.println("Name is already taken, please Sign up again");
                break;
            }
            else if (i == (UserData.size()-1)){
                createUser(name, pass, "Student");
                System.out.println("Thank you for signing up! Your username is "+ name+" and your password is "+ pass);
                getUserData(UserData);// Remove this line later, this is only for visual aid
                break;
            }
        }
    }
    
    public static void getCourseData(ArrayList<Course> ArrayList)// prints all of the Courses
    {
        for (int i =0; i < ArrayList.size(); i++){
            System.out.println(Arrays.toString(ArrayList.get(i).getInfo()));
        }  
    }
}


